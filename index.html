<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>InscriÃ§Ã£o NUPIEPRO</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --roxo: #0f0732; --laranja: #f85900; --dinamica: #f85900; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Plus Jakarta Sans', sans-serif; -webkit-tap-highlight-color: transparent; }
        body { background: var(--roxo); min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 20px; background-image: radial-gradient(circle at top right, #1a1245 0%, #0f0732 60%); }
        .card { background: white; width: 100%; max-width: 480px; border-radius: 32px; box-shadow: 0 25px 80px rgba(0,0,0,0.4); overflow: hidden; position: relative; z-index: 10; }
        .header { background: var(--roxo); color: white; padding: 45px 30px 30px; text-align: center; border-bottom: 5px solid var(--dinamica); }
        .logo-nupi { width: 80px; height: 80px; border-radius: 50%; border: 4px solid var(--dinamica); margin-bottom: 15px; background: white; padding: 2px; }
        form { padding: 30px 30px 50px 30px; }
        .input-group { margin-bottom: 20px; }
        label { display: block; font-weight: 700; color: var(--roxo); font-size: 0.85rem; margin-bottom: 8px; margin-left: 5px; }
        input, select { width: 100%; padding: 16px; border: 2px solid #e2e8f0; border-radius: 16px; font-size: 1rem; outline: none; transition: 0.3s; background: #f8fafc; color: #334155; appearance: none; }
        input:focus, select:focus { border-color: var(--dinamica); background: white; }
        .btn-confirm { width: 100%; padding: 18px; background: var(--roxo); color: white; border: none; border-radius: 16px; font-size: 1rem; font-weight: 800; cursor: pointer; transition: 0.3s; box-shadow: 0 10px 25px rgba(15, 7, 50, 0.2); display: flex; align-items: center; justify-content: center; gap: 10px; }
        .btn-confirm:active { transform: scale(0.98); }
        #tela-fechado { display: none; text-align: center; padding: 60px 30px; }
        .icon-closed { font-size: 4rem; color: #cbd5e1; margin-bottom: 20px; }
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(15, 7, 50, 0.9); backdrop-filter: blur(8px); z-index: 100; display: none; align-items: center; justify-content: center; padding: 20px; }
        .modal-box { background: white; width: 100%; max-width: 380px; padding: 30px; border-radius: 24px; text-align: center; }
        .data-review { text-align: left; background: #f1f5f9; padding: 15px; border-radius: 12px; margin: 15px 0 25px; font-size: 0.9rem; line-height: 1.6; color: #475569; }
        .modal-actions { display: flex; gap: 10px; }
        #toast { position: fixed; top: 20px; left: 50%; transform: translateX(-50%) translateY(-150%); background: white; padding: 15px 25px; border-radius: 50px; box-shadow: 0 10px 40px rgba(0,0,0,0.3); font-weight: 800; color: var(--roxo); display: flex; align-items: center; gap: 10px; z-index: 200; transition: 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); border-bottom: 3px solid var(--dinamica); white-space: nowrap; }
        #toast.show { transform: translateX(-50%) translateY(0); }
        .zap-float { position: fixed; bottom: 20px; right: 20px; z-index: 90; width: 60px; height: 60px; filter: drop-shadow(0 4px 6px rgba(0,0,0,0.2)); transition: 0.3s; cursor: pointer; }
        .zap-float:hover { transform: scale(1.1); }
        .zap-float img { width: 100%; height: 100%; object-fit: contain; }
    </style>
</head>
<body>
    <div id="toast"><i class="fa-solid fa-circle-check" style="color:#10b981"></i> InscriÃ§Ã£o garantida! ðŸ’™ðŸ§¡ðŸš€</div>
    <div class="card">
        <div id="loading" style="padding: 60px; text-align: center; color: var(--roxo); font-weight: 600;"><i class="fa-solid fa-circle-notch fa-spin fa-2x" style="margin-bottom: 15px;"></i><br>Carregando Evento...</div>
        <div id="main-content" style="display:none;">
            <div class="header">
                <img src="https://i.ibb.co/7hcph2F/download.jpg" class="logo-nupi">
                <div style="font-size: 0.75rem; opacity: 0.8; margin-bottom: 5px; text-transform: uppercase; font-weight: 700;">FormulÃ¡rio Oficial</div>
                <h2 id="titulo-evento" style="line-height: 1.2;">---</h2>
            </div>
            <form id="form-nupi">
                <div class="input-group"><label>Nome Completo</label><input type="text" id="nome" name="Nome" required placeholder="Digite seu nome"></div>
                <div class="input-group"><label>E-mail</label><input type="email" id="email" name="Email" required placeholder="seu@email.com"></div>
                <div class="input-group"><label>InstituiÃ§Ã£o</label>
                    <select id="inst" name="Instituicao" required><option value="" disabled selected>Selecione...</option><option value="UFPI">UFPI (Universidade Federal)</option><option value="IFPI">IFPI</option><option value="UESPI">UESPI</option><option value="Outra">Outra Faculdade</option></select>
                </div>
                <div class="input-group"><label>PerÃ­odo / Status</label>
                    <select id="periodo" name="Periodo" required><option value="" disabled selected>Selecione...</option><option value="1Âº PerÃ­odo">1Âº PerÃ­odo</option><option value="2Âº PerÃ­odo">2Âº PerÃ­odo</option><option value="3Âº PerÃ­odo">3Âº PerÃ­odo</option><option value="4Âº PerÃ­odo">4Âº PerÃ­odo</option><option value="5Âº PerÃ­odo">5Âº PerÃ­odo</option><option value="6Âº PerÃ­odo">6Âº PerÃ­odo</option><option value="7Âº PerÃ­odo">7Âº PerÃ­odo</option><option value="8Âº PerÃ­odo">8Âº PerÃ­odo</option><option value="9Âº PerÃ­odo">9Âº PerÃ­odo</option><option value="10Âº PerÃ­odo ou +">10Âº PerÃ­odo ou +</option><option value="Concluinte / Formando">ðŸŽ“ Concluinte / Formando</option><option value="Egresso / PÃ³s">ðŸ’¼ Egresso / PÃ³s-Grad</option></select>
                </div>
                <div class="input-group"><label>Curso</label><input type="text" id="curso" name="Curso" required placeholder="Ex: Eng. ProduÃ§Ã£o"></div>
                <input type="hidden" name="Evento" id="evento-hidden">
                <button type="button" class="btn-confirm" onclick="abrirModal()">AVANÃ‡AR <i class="fa-solid fa-arrow-right"></i></button>
            </form>
        </div>
        <div id="tela-fechado">
            <i class="fa-solid fa-lock icon-closed"></i>
            <h2 style="color:var(--roxo); margin-bottom: 10px;">InscriÃ§Ãµes Encerradas!</h2>
            <p style="color: #64748b;">As vagas para este evento foram preenchidas. Fique ligado no <strong>@nupiepro</strong>! ðŸ’™ðŸ§¡</p>
        </div>
    </div>
    <a href="#" id="link-zap" class="zap-float" target="_blank"><img src="https://i.ibb.co/nq59JvjG/pngtree-whatsapp-icon-png-image-6315990.png" alt="WhatsApp"></a>
    <div class="modal-overlay" id="modal">
        <div class="modal-box">
            <h3 style="color:var(--roxo)">Confira seus dados</h3>
            <div class="data-review" id="review-content"></div>
            <div class="modal-actions">
                <button onclick="fecharModal()" style="flex:1; padding:12px; border:none; background:#f1f5f9; border-radius:12px; cursor:pointer; color:#64748b; font-weight:700;">Corrigir</button>
                <button onclick="enviar()" id="btn-final" style="flex:1; padding:12px; border:none; background:var(--dinamica); color:white; border-radius:12px; cursor:pointer; font-weight:800;">CONFIRMAR! ðŸš€</button>
            </div>
        </div>
    </div>
    <script>
        const API = "https://script.google.com/macros/s/AKfycbwdfIzySyFPoVtMhYhEqJMuZeciKj-BzCPXTsqdVpUUz_4FmSx2rlTzK_A0W4p7WkWTsA/exec";
        window.onload = () => {
            fetch(API).then(r => r.json()).then(data => {
                document.getElementById('loading').style.display = 'none';
                if(data.status === "FECHADO") {
                    document.getElementById('tela-fechado').style.display = 'block';
                } else {
                    document.getElementById('main-content').style.display = 'block';
                    document.getElementById('titulo-evento').innerText = data.evento;
                    document.getElementById('evento-hidden').value = data.evento;
                    document.documentElement.style.setProperty('--dinamica', data.cor);
                    const msg = `Oi NUPI! Tenho dÃºvida sobre a inscriÃ§Ã£o do evento: ${data.evento}`;
                    document.getElementById('link-zap').href = `https://wa.me/5586999976226?text=${encodeURIComponent(msg)}`;
                }
            }).catch(() => {});
        };
        function abrirModal() {
            const form = document.getElementById('form-nupi');
            if(!form.checkValidity()) { form.reportValidity(); return; }
            document.getElementById('review-content').innerHTML = `<strong>Nome:</strong> ${document.getElementById('nome').value}<br><strong>Email:</strong> ${document.getElementById('email').value}<br><strong>Curso:</strong> ${document.getElementById('curso').value}<br><strong>Status:</strong> ${document.getElementById('periodo').value}`;
            document.getElementById('modal').style.display = 'flex';
        }
        function fecharModal() { document.getElementById('modal').style.display = 'none'; }
        async function enviar() {
            const btn = document.getElementById('btn-final');
            btn.innerHTML = '<i class="fa-solid fa-circle-notch fa-spin"></i> Enviando...'; btn.disabled = true;
            const fd = new URLSearchParams(new FormData(document.getElementById('form-nupi')));
            try {
                const res = await fetch(API, { method: 'POST', body: fd });
                const json = await res.json();
                if(json.result === "error") { alert(json.msg); location.reload(); }
                else {
                    fecharModal();
                    document.getElementById('toast').classList.add('show');
                    document.getElementById('form-nupi').reset();
                    setTimeout(() => { document.getElementById('main-content').innerHTML = "<div style='text-align:center; padding:50px;'><h2>Sucesso! ðŸ’™ðŸ§¡</h2><p>InscriÃ§Ã£o realizada.</p></div>"; }, 2000);
                }
            } catch(e) { alert("Erro de conexÃ£o."); btn.innerText = "CONFIRMAR! ðŸš€"; btn.disabled = false; }
        }
    </script>
</body>
</html>
